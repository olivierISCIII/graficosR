<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Rmarkdown y shiny | Gráficos con R</title>
  <meta name="description" content="3 Rmarkdown y shiny | Gráficos con R" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Rmarkdown y shiny | Gráficos con R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Rmarkdown y shiny | Gráficos con R" />
  
  
  

<meta name="author" content="Olivier Nuñez" />


<meta name="date" content="2019-09-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="graficos-avanzados.html">
<link rel="next" href="referencias.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preámbulo</a></li>
<li class="chapter" data-level="1" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html"><i class="fa fa-check"></i><b>1</b> Gráficos básicos en el análisis de datos</a><ul>
<li class="chapter" data-level="1.1" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#distribucion-de-una-variable"><i class="fa fa-check"></i><b>1.1</b> Distribución de una variable</a><ul>
<li class="chapter" data-level="1.1.1" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#histograma"><i class="fa fa-check"></i><b>1.1.1</b> Histograma</a></li>
<li class="chapter" data-level="1.1.2" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#diagrama-de-caja-boxplot"><i class="fa fa-check"></i><b>1.1.2</b> Diagrama de caja (boxplot)</a></li>
<li class="chapter" data-level="1.1.3" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#diagrama-de-barras"><i class="fa fa-check"></i><b>1.1.3</b> Diagrama de barras</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#relacion-entre-dos-variables"><i class="fa fa-check"></i><b>1.2</b> Relación entre dos variables</a><ul>
<li class="chapter" data-level="1.2.1" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#diagrama-de-dispersion"><i class="fa fa-check"></i><b>1.2.1</b> Diagrama de dispersión</a></li>
<li class="chapter" data-level="1.2.2" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#dotchart"><i class="fa fa-check"></i><b>1.2.2</b> Dotchart</a></li>
<li class="chapter" data-level="1.2.3" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#relacion-con-una-variable-temporal"><i class="fa fa-check"></i><b>1.2.3</b> Relación con una variable temporal</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html"><i class="fa fa-check"></i><b>2</b> Gráficos avanzados</a><ul>
<li class="chapter" data-level="2.1" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#elementos-de-un-grafico"><i class="fa fa-check"></i><b>2.1</b> Elementos de un gráfico</a><ul>
<li class="chapter" data-level="2.1.1" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#datos"><i class="fa fa-check"></i><b>2.1.1</b> Datos</a></li>
<li class="chapter" data-level="2.1.2" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#esteticas-aes"><i class="fa fa-check"></i><b>2.1.2</b> Estéticas (<code>aes</code>)</a></li>
<li class="chapter" data-level="2.1.3" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#capas-geoms"><i class="fa fa-check"></i><b>2.1.3</b> Capas (<code>geoms</code>)</a></li>
<li class="chapter" data-level="2.1.4" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#facetas"><i class="fa fa-check"></i><b>2.1.4</b> Facetas</a></li>
<li class="chapter" data-level="2.1.5" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#toque-final"><i class="fa fa-check"></i><b>2.1.5</b> Toque final</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#mapas"><i class="fa fa-check"></i><b>2.2</b> Mapas</a><ul>
<li class="chapter" data-level="2.2.1" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#mas-ejemplos-de-mapas-con-puntos"><i class="fa fa-check"></i><b>2.2.1</b> Más ejemplos de mapas con puntos</a></li>
<li class="chapter" data-level="2.2.2" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#mas-alla-de-los-puntos-densidades-y-poligonos"><i class="fa fa-check"></i><b>2.2.2</b> Más allá de los puntos: densidades y poligonos</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#arboles-filogeneticos"><i class="fa fa-check"></i><b>2.3</b> Árboles filogenéticos</a><ul>
<li class="chapter" data-level="2.3.1" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#importacion-de-un-arbol"><i class="fa fa-check"></i><b>2.3.1</b> Importación de un árbol</a></li>
<li class="chapter" data-level="2.3.2" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#representacion-basica"><i class="fa fa-check"></i><b>2.3.2</b> Representación básica</a></li>
<li class="chapter" data-level="2.3.3" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#agrupacion-de-nodos"><i class="fa fa-check"></i><b>2.3.3</b> Agrupación de nodos</a></li>
<li class="chapter" data-level="2.3.4" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#anadir-heatmap"><i class="fa fa-check"></i><b>2.3.4</b> Añadir Heatmap</a></li>
<li class="chapter" data-level="2.3.5" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#visualizacion-de-multiple-arboles"><i class="fa fa-check"></i><b>2.3.5</b> Visualización de multiple arboles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html"><i class="fa fa-check"></i><b>3</b> Rmarkdown y shiny</a><ul>
<li class="chapter" data-level="3.1" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html#rmarkdown"><i class="fa fa-check"></i><b>3.1</b> Rmarkdown</a><ul>
<li class="chapter" data-level="3.1.1" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html#rmarkdown-en-15-mn"><i class="fa fa-check"></i><b>3.1.1</b> Rmarkdown en 15 mn</a></li>
<li class="chapter" data-level="3.1.2" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html#elementos-de-un-documento-rmarkdown"><i class="fa fa-check"></i><b>3.1.2</b> Elementos de un documento Rmarkdown</a></li>
<li class="chapter" data-level="3.1.3" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html#tablas-con-rmarkdown"><i class="fa fa-check"></i><b>3.1.3</b> Tablas con Rmarkdown</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html#shiny"><i class="fa fa-check"></i><b>3.2</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i><b>4</b> Referencias</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Gráficos con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rmarkdown-y-shiny" class="section level1">
<h1><span class="header-section-number">3</span> Rmarkdown y shiny</h1>
<p>Esta sección está dedicada a dos extensiones de R: <code>shiny</code> y <code>rmarkdown</code>. El primero de ellos permite crear cuadros de mando interactivos. El segundo, documentos automatizados que combinan texto con código, tablas y gráficos generados directamente por R.</p>
<p>Estos dos paquetes no son complejos sino, más bien, extensos y llenos de detalles. El objetivo de esta sesión es recorrer sus posibilidades.</p>
<div id="rmarkdown" class="section level2">
<h2><span class="header-section-number">3.1</span> Rmarkdown</h2>
<p>Rmarkdown permite generar documentos dinámicos al mezclar texto formateado y resultados generados por R. Los documentos generados pueden estar en HTML, PDF, Word y muchos otros formatos.</p>
<p>Las ventajas de esta herramienta son numerosas:</p>
<ul>
<li>El código y sus resultados no están separados de los comentarios asociados a ellos</li>
<li>El documento final es reproducible</li>
<li>El documento se puede actualizar fácilmente, por ejemplo, si los datos de origen se han modificado.</li>
</ul>
<p>Por lo tanto, es una herramienta muy práctica para exportar, comunicar y difundir resultados estadísticos.</p>
<p>Este documento se ha generado a partir de archivos R Markdown ^ [Más precisamente gracias a la extensión <code>bookdown</code> que permite generar documentos de tipo libro].</p>
<p>Aprender Rmarkdown implica aprender dos cosas distintas:</p>
<ul>
<li>Markdown, un <em>formato</em> para escribir documentos simples en modo texto. Tiene la ventaja de ser fácilmente legible por humanos pero, a la vez, procesable programáticamente para volcarlos en otros formatos: pdf, html, …</li>
<li>La integración entre R y markdown</li>
</ul>
<p>Aquí, un documento de R Markdown básico:</p>
<pre><code>---
title: &quot;Ejemplo de R Markdown&quot;
output: pdf_document
---

*R Markdown* permite mezclar :

- texto libre puesto en formato
- bloques de codigo de R

Los bloques de codigo se pueden ejecutar para incluir sus resultados en el documento,
así por ejemplo :

```{r}
mean(airquality$Ozone,na.rm=TRUE)
```

## Gráficos

Se puede también incluir __gráficos__ :

```{r}
plot(Ozone~Temp,data=airquality,bg=&quot;lightblue&quot;,pch=21)
```</code></pre>
<p>Al “compilar” el documento, el texto se formatea, los bloques de código se ejecutan, sus resultados se agregan al documento y todo se transforma en uno de los diferentes formatos posibles (html, pdf, word, …).</p>
<p>Aquí, la representación del documento anterior en formato HTML</p>
<p><img src="resources/minimal.png" /></p>
<div id="rmarkdown-en-15-mn" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Rmarkdown en 15 mn</h3>
<p>Para aprender Markdown, se recomiendan los dos siguientes ejercicios :</p>
<div class="ej">
<p>
Crear un fichero <code>.Rmd</code> usando <code>File &gt; New File &gt; R Markdown</code>.
</p>
</div>
<p>Al crear un nuevo fichero de tipo <code>R Markdown</code>, RStudio proporciona, en lugar de uno vacío, una plantilla que muestra algunas de las opciones disponibles en este formato. Eso facilita el siguiente ejercicio:</p>
<div class="ej">
<p>
Modificar el fichero de ejemplo creado en el ejercicio anterior añadiéndole títulos de varios niveles, párrafos de texto, cursivas, negritas, enlaces, listas (numeradas y sin numerar), etc. usando como guía el <a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf"><code>Cheat Sheet</code></a> del paquete. <em>Compilar</em> el documento (p.e., pulsando el botón con la etiqueta <em>Knit HTML</em> situado encima del panel de edición de RStudio) para inspeccionar el resultado final.
</p>
</div>
<p>Se puede también generar documentos en formato Word y PDF. Para estos formato, es necesario tener instalados los programas : MS Word, LibreOffice o similar para el primero y LaTeX para el segundo.</p>
<p>El segundo de los componentes de Rmarkdown (y lo que lo diferencia de Markdown <em>a secas</em>) es la posibilidad de incorporar bloques de código en el hilo del documento. Estos bloques de código se procesan durante la compilación del documento y los resultados que generan (tablas, gráficos, etc.) se integran en la salida. La plantilla de fichero Rmarkdown que genera RStudio incluye unos cuantos ejemplos de bloques de código.</p>
<div class="ej">
<p>
Insertar sobre el documento (o sobre una nueva plantilla) bloques de código de R que hagan alguna cosa. Los bloques de código incluyen opciones en su encabezamiento (p.e., para que un bloque se ejecute o no; para que el código se muestre o se oculte en el documento final, etc.). Las opciones disponibles se pueden consultar en el <a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf"><code>Cheat Sheet</code></a> del paquete.
</p>
</div>
</div>
<div id="elementos-de-un-documento-rmarkdown" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Elementos de un documento Rmarkdown</h3>
<div id="encabezado-preambulo" class="section level4">
<h4><span class="header-section-number">3.1.2.1</span> Encabezado (préambulo)</h4>
<p>La primera parte del documento es su <em>encabezado</em>. Se encuentra al principio del documento y está delimitado por tres guiones (<code>---</code>) antes y después:</p>
<pre><code>---
title: &quot;Titulo&quot;
author: &quot;Nombre Apellido&quot;
date: &quot;2 de mayo de 2018&quot;
output: html_document
---</code></pre>
<p>Este encabezado contiene los metadatos del documento, como su título, autor, fecha, más una serie de opciones posibles que permiten configurar o personalizar todo el documento y su representación. Aquí, por ejemplo, la línea <code>output: html_document</code> indica que el documento generado tendrá un formato HTML.</p>
</div>
<div id="texto-del-documento" class="section level4">
<h4><span class="header-section-number">3.1.2.2</span> Texto del documento</h4>
<p>El cuerpo del documento consiste en texto con la sintaxis de Markdown: un marcado ligero que permite establecer niveles de títulos o formatear texto. Por ejemplo, el siguiente texto:</p>
<pre><code>Este es un texto *en cursiva* y **en negrita**.

Se puede definir una lista así:

- primer elemento
- segundo elemento</code></pre>
<p>Que dará la siguiente salida</p>
<blockquote>
<p>Este es un texto <em>en cursiva</em> y <strong>en negrita</strong>.</p>
<p>Se puede definir una lista así:</p>
<ul>
<li>primer elemento</li>
<li>segundo elemento</li>
</ul>
</blockquote>
<p>Los títulos de diferentes niveles se pueden definir comenzando una línea con uno o más caracteres <code>#</code>:</p>
<pre><code># Titulo de nivel 1

## Titulo de nivel 2

### Titulo de nivel 3</code></pre>
<p>Cuando se han definido los títulos, al hacer clic en el icono <em>Show document outline</em> en el extremo derecho de la barra de herramientas asociada al archivo, se muestra una tabla dinámica de contenidos generada automáticamente a partir de los títulos que permite navegar fácilmente en el documento.</p>
<p>La sintaxis de Markdown permite también insertar enlaces o imágenes. Por ejemplo, la siguiente sintaxis:</p>
<pre><code>[ISCIII](http://www.isciii.es/)</code></pre>
<p>Dará el siguiente vinculo:</p>
<blockquote>
<p><a href="http://www.isciii.es/">ISCIII</a></p>
</blockquote>
<p>En RStudio, el menú <em>Help</em> y luego <em>Markdown quick reference</em> proporciona una descripción más completa de la sintaxis.</p>
</div>
<div id="bloques-de-codigo" class="section level4">
<h4><span class="header-section-number">3.1.2.3</span> Bloques de codigo</h4>
<p>Además del texto libre en formato Markdown, un documento R Markdown contiene, como su nombre indica, código R. Este código se incluye en fragmentos definidos por la siguiente sintaxis:</p>
<p>Como esta cadena de caracteres no es muy fácil de escribir, se puede usar <em>R</em> en el menú Insertar de RStudio, o teclear el atajo <code>Ctrl+Alt+i</code>.</p>
<p>Se puede dar un nombre al bloque y se indica directamente después de <code>r</code>:</p>
<p><code>{r nombre_del_bloque}</code></p>
<p>No es obligatorio, pero puede ser útil en caso de error de compilación, para identificar el bloque que causó el problema. Atención, no podemos tener dos bloques con el mismo nombre.</p>
<p>Además de un nombre, se puede pasar a un bloque una serie de opciones para modificar su comportamiento.</p>
<pre><code>```{r echo = FALSE, warning = FALSE}
x &lt;- 1:5
```</code></pre>
<p>Una de las opciones más útiles es la opción <code>echo</code>. Por defecto <code>echo=TRUE</code>, y el bloque de código R se inserta en el documento generado:</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>
<span class="kw">print</span>(x)</code></pre>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p>Pero, si la opción <code>echo=FALSE</code>, entonces el código R ya no se inserta en el documento, y solo se el resultado será visible:</p>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p>Aquí hay una lista de algunas de las opciones más comunes:</p>
<table>
<thead>
<tr class="header">
<th>opción</th>
<th>valores</th>
<th>descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>echo</td>
<td>TRUE / FALSE</td>
<td>Mostrar o no el código R en el documento</td>
</tr>
<tr class="even">
<td>eval</td>
<td>TRUE / FALSE</td>
<td>Ejecutar o no el código R en tiempo de compilación</td>
</tr>
<tr class="odd">
<td>warning</td>
<td>TRUE / FALSE</td>
<td>Mostrar o no las advertencias generadas por el bloque</td>
</tr>
<tr class="even">
<td>message</td>
<td>TRUE / FALSE</td>
<td>Mostrar o no los mensajes generados por el bloque</td>
</tr>
</tbody>
</table>
<p>Hay muchas otras opciones descritas en la <a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">Guía de referencia de R Markdown</a>.</p>
</div>
</div>
<div id="tablas-con-rmarkdown" class="section level3">
<h3><span class="header-section-number">3.1.3</span> Tablas con Rmarkdown</h3>
<div id="tablas-cruzadas" class="section level4">
<h4><span class="header-section-number">3.1.3.1</span> Tablas cruzadas</h4>
<p>Por defecto, las tablas generadas por la función <code>table</code> se muestran tal y como aparecen en la consola de R, es decir, en texto sin formato:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># titanic&lt;-ftable(Survived~Class,data=Titanic)</span>
<span class="co"># Supervivencia al Titanic según clase</span>
titanic&lt;-<span class="kw">apply</span>(Titanic,<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>),sum)
titanic</code></pre>
<pre><code>##       Survived
## Class   No Yes
##   1st  122 203
##   2nd  167 118
##   3rd  528 178
##   Crew 673 212</code></pre>
<p>Su presentación se puede mejorar utilizando la función <code>kable</code> de la extensión <code>knitr</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(knitr)
<span class="kw">kable</span>(titanic,<span class="dt">caption=</span><span class="st">&quot;Supervivencia a la catastrofe del Titanic según la clase&quot;</span>)</code></pre>
<table>
<caption><span id="tab:unnamed-chunk-87">Table 3.1: </span>Supervivencia a la catastrofe del Titanic según la clase</caption>
<thead>
<tr class="header">
<th></th>
<th align="right">No</th>
<th align="right">Yes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1st</td>
<td align="right">122</td>
<td align="right">203</td>
</tr>
<tr class="even">
<td>2nd</td>
<td align="right">167</td>
<td align="right">118</td>
</tr>
<tr class="odd">
<td>3rd</td>
<td align="right">528</td>
<td align="right">178</td>
</tr>
<tr class="even">
<td>Crew</td>
<td align="right">673</td>
<td align="right">212</td>
</tr>
</tbody>
</table>
</div>
<div id="base-de-datos" class="section level4">
<h4><span class="header-section-number">3.1.3.2</span> Base de datos</h4>
<p>Respecto a las bases de datos (<code>tibble</code> o <code>data.frame</code>), la presentación HTML por defecto es el contenido que aparece en consola. Este formato puede ser poco adecuado si la tabla excede una cierta dimensión.</p>
<p>Una alternativa es usar la función <code>paged_table</code>, que muestra una representación HTML paginada de la base:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(gapminder)
rmarkdown<span class="op">::</span><span class="kw">paged_table</span>(gapminder)</code></pre>
<p>Otra alternativa es la función <code>datatable</code> de la extensión <code>DT</code>, que ofrece aún más interactividad:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(DT)
<span class="kw">datatable</span>(gapminder)</code></pre>
<p>En cualquier caso, no es recomendable mostrar una tabla de datos muy grandes de esta manera porque el archivo HTML resultante contendría todos los datos y, por lo tanto, sería muy grande.</p>
</div>
</div>
</div>
<div id="shiny" class="section level2">
<h2><span class="header-section-number">3.2</span> Shiny</h2>
<p><code>shiny</code> es un paquete de R para la construcción de cuadros de mando <em>web</em> interactivos. Permite, por ejemplo, crear interfaces para algoritmos o acceder y manipular tablas de datos a través de controles de HMTL: <em>sliders</em>, botones, etc.</p>
<p>El paquete proporciona varias aplicaciones de ejemplo que usaremos para aprender los rudimentos de <code>shiny</code>. Por ejemplo, se puede hacer</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)
<span class="kw">runExample</span>(<span class="dt">example =</span> <span class="st">&quot;01_hello&quot;</span>)</code></pre>
<p>para desplegar la aplicación de ejemplo <code>01_hello</code>. Esta aplicación pinta en el panel central un histograma y tiene en el lateral un <em>slider</em> con el que modular su granularidad (técnicamente, para definir el número de pedazos, <em>breaks</em>, en los que partir el rango de valores del vector subyacente).</p>
<p>Para detener la aplicación, en RStudio, presiona sobre el icono de la señal de <em>stop</em> (en la parte superior de la ventana de la consola); en una terminal, usa Control-C para interrumpir la ejecución.</p>
<div class="ej">
<p>
Ejecuta <code>runExample()</code> (sin argumento); el mensaje de error indica qué otros ejemplos además de <code>01_hello</code> están disponibles por defecto. Échales un vistazo a algunos.
</p>
</div>
<div class="ej">
<p>
Crea tu primera aplicación en <code>shiny</code>. Para ello, despliega <code>01_hello</code>. Luego, copia los ficheros <code>ui.r</code> y <code>server.r</code> en un nuevo directorio vacío. Llámalo, por ejemplo, <code>prueba00</code>. Luego ejecuta <code>runApp(“prueba00”)</code> para desplegarla. (Nota: el argumento de <code>runApp</code> tiene que ser la ruta, sea absoluta o relativa, del directorio en cuestión; recuerda que una aplicación en <code>shiny</code> recibe el nombre del directorio que la contiene).
</p>
</div>
<p>El ejercicio anterior muestra cómo construir aplicaciones en <code>shiny</code>. Una aplicación en <code>shiny</code> es un directorio que da nombre a la aplicación. Dentro de él tiene que haber, como mínimo, dos ficheros: <code>ui.r</code> y <code>server.r</code>. El primero define la interfaz de la aplicación. El segundo realiza los cálculos en segundo plano cada vez que el usuario manipula los controles de la interfaz.</p>
<p>Además de estos ficheros, en aplicaciones más complejas, puede haber otros organizados o no en subdirectorios: datos, otros ficheros auxiliares de código, logos, CSSs, imágenes estáticas, etc. Tendrás que leer la documentación de <code>shiny</code> para averiguar cómo y dónde colocar estos recursos adicionales.</p>
<p><code>ui.r</code> y <code>server.r</code> se comunican entre sí: <code>ui.r</code> tiene que pasarle parámetros a <code>server.r</code> y este resultados a aquel. Esto se hace a través de variables y estructuras de datos con una forma muy particular. El siguiente ejercicio está pensado para que descubras el mecanismo de comunicación. Se te va a pedir que traduzcas el nombre de las variables y los parámetros al español. Obviamente, al traducir las variables en uno de los ficheros se romperá la aplicación. Realinear los nombres en el otro fichero te servirá para identificar los mecanismos de comunicación.</p>
<div class="ej">
<p>
Crea <code>prueba01</code> como una copia de prueba00. Entonces, traduce al español el nombre de todas las variables implicadas en la aplicación.
</p>
</div>
<p>El siguiente ejercicio te enseñará a modificar la interfaz de una aplicación en <code>shiny</code>, incorporar nuevos controles y añadir el código subyacente para que responda adecuadamente.</p>
<div class="ej">
<p>
Añade a la aplicación <code>prueba01</code> otro <em>slider</em> que mueva una linea vertical roja que dibujes sobre el histograma. Es recomendable que comiences, y en este orden, añadiendo una línea roja en algún punto (del eje x) prefijado con la función <code>abline</code>, incorporando el <em>slider</em> y finalmente, vinculando el valor proporcionado por el <em>slider</em> al punto del eje x.
</p>
<p>
Nota: cuando modifiques <code>ui.r</code>, presta atención a la estructura del programa y cómo se corresponde a la de la interfaz web: qué es lo que va en la barra lateral, qué en el panel central, etc. Ten cuidado además con los paréntesis: ¡hay muchos y es fácil desemparejarlos!
</p>
</div>
<div class="ej">
<p>
Inspecciona el tutorial de <code>shiny</code> (<a href="http://shiny.rstudio.com/tutorial/"><code><a href="http://shiny.rstudio.com/tutorial/" class="uri">http://shiny.rstudio.com/tutorial/</a></code></a>) para descubrir qué tipo <em>widgets</em> (además de <em>sliders</em>) existen, cómo se procesan esos <em>inputs</em> en <code>server.r</code>, etc. Recuerda que ese tutorial es la principal fuente de información sobre todo lo relacionado con <code>shiny</code>.
</p>
</div>
<div class="ej">
<p>
Visita la galería de aplicaciones de <code>shiny</code> (<a href="http://shiny.rstudio.com/gallery/"><code><a href="http://shiny.rstudio.com/gallery/" class="uri">http://shiny.rstudio.com/gallery/</a></code></a>) para investigar cómo implementar controles, qué tipos adicionales de paneles existen, etc.
</p>
</div>
<p>Uno de los asuntos (avanzados) que se discuten en esas páginas es el de las reacciones: <code>shiny</code> está basado en un tipo de programación denominada <em>reactiva</em>, que es la que permite que las funciones de <code>server.r</code> simulen estar escuchando (y <em>reaccionen</em>) a los cambios que realiza el usuario en los controles de la aplicación. Puedes buscar en Internet más información sobre la <em>programación reactiva</em> si te interesa el tema.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="graficos-avanzados.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="referencias.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["graficosConR.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
