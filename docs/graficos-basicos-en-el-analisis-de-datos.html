<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Gráficos básicos en el análisis de datos | Gráficos con R</title>
  <meta name="description" content="1 Gráficos básicos en el análisis de datos | Gráficos con R" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Gráficos básicos en el análisis de datos | Gráficos con R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Gráficos básicos en el análisis de datos | Gráficos con R" />
  
  
  

<meta name="author" content="Olivier Nuñez" />


<meta name="date" content="2019-09-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html">
<link rel="next" href="graficos-avanzados.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preámbulo</a></li>
<li class="chapter" data-level="1" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html"><i class="fa fa-check"></i><b>1</b> Gráficos básicos en el análisis de datos</a><ul>
<li class="chapter" data-level="1.1" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#distribucion-de-una-variable"><i class="fa fa-check"></i><b>1.1</b> Distribución de una variable</a><ul>
<li class="chapter" data-level="1.1.1" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#histograma"><i class="fa fa-check"></i><b>1.1.1</b> Histograma</a></li>
<li class="chapter" data-level="1.1.2" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#diagrama-de-caja-boxplot"><i class="fa fa-check"></i><b>1.1.2</b> Diagrama de caja (boxplot)</a></li>
<li class="chapter" data-level="1.1.3" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#diagrama-de-barras"><i class="fa fa-check"></i><b>1.1.3</b> Diagrama de barras</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#relacion-entre-dos-variables"><i class="fa fa-check"></i><b>1.2</b> Relación entre dos variables</a><ul>
<li class="chapter" data-level="1.2.1" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#diagrama-de-dispersion"><i class="fa fa-check"></i><b>1.2.1</b> Diagrama de dispersión</a></li>
<li class="chapter" data-level="1.2.2" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#dotchart"><i class="fa fa-check"></i><b>1.2.2</b> Dotchart</a></li>
<li class="chapter" data-level="1.2.3" data-path="graficos-basicos-en-el-analisis-de-datos.html"><a href="graficos-basicos-en-el-analisis-de-datos.html#relacion-con-una-variable-temporal"><i class="fa fa-check"></i><b>1.2.3</b> Relación con una variable temporal</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html"><i class="fa fa-check"></i><b>2</b> Gráficos avanzados</a><ul>
<li class="chapter" data-level="2.1" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#elementos-de-un-grafico"><i class="fa fa-check"></i><b>2.1</b> Elementos de un gráfico</a><ul>
<li class="chapter" data-level="2.1.1" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#datos"><i class="fa fa-check"></i><b>2.1.1</b> Datos</a></li>
<li class="chapter" data-level="2.1.2" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#esteticas-aes"><i class="fa fa-check"></i><b>2.1.2</b> Estéticas (<code>aes</code>)</a></li>
<li class="chapter" data-level="2.1.3" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#capas-geoms"><i class="fa fa-check"></i><b>2.1.3</b> Capas (<code>geoms</code>)</a></li>
<li class="chapter" data-level="2.1.4" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#facetas"><i class="fa fa-check"></i><b>2.1.4</b> Facetas</a></li>
<li class="chapter" data-level="2.1.5" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#toque-final"><i class="fa fa-check"></i><b>2.1.5</b> Toque final</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#mapas"><i class="fa fa-check"></i><b>2.2</b> Mapas</a><ul>
<li class="chapter" data-level="2.2.1" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#mas-ejemplos-de-mapas-con-puntos"><i class="fa fa-check"></i><b>2.2.1</b> Más ejemplos de mapas con puntos</a></li>
<li class="chapter" data-level="2.2.2" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#mas-alla-de-los-puntos-densidades-y-poligonos"><i class="fa fa-check"></i><b>2.2.2</b> Más allá de los puntos: densidades y poligonos</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#arboles-filogeneticos"><i class="fa fa-check"></i><b>2.3</b> Árboles filogenéticos</a><ul>
<li class="chapter" data-level="2.3.1" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#importacion-de-un-arbol"><i class="fa fa-check"></i><b>2.3.1</b> Importación de un árbol</a></li>
<li class="chapter" data-level="2.3.2" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#representacion-basica"><i class="fa fa-check"></i><b>2.3.2</b> Representación básica</a></li>
<li class="chapter" data-level="2.3.3" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#agrupacion-de-nodos"><i class="fa fa-check"></i><b>2.3.3</b> Agrupación de nodos</a></li>
<li class="chapter" data-level="2.3.4" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#anadir-heatmap"><i class="fa fa-check"></i><b>2.3.4</b> Añadir Heatmap</a></li>
<li class="chapter" data-level="2.3.5" data-path="graficos-avanzados.html"><a href="graficos-avanzados.html#visualizacion-de-multiple-arboles"><i class="fa fa-check"></i><b>2.3.5</b> Visualización de multiple arboles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html"><i class="fa fa-check"></i><b>3</b> Rmarkdown y shiny</a><ul>
<li class="chapter" data-level="3.1" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html#rmarkdown"><i class="fa fa-check"></i><b>3.1</b> Rmarkdown</a><ul>
<li class="chapter" data-level="3.1.1" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html#rmarkdown-en-15-mn"><i class="fa fa-check"></i><b>3.1.1</b> Rmarkdown en 15 mn</a></li>
<li class="chapter" data-level="3.1.2" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html#elementos-de-un-documento-rmarkdown"><i class="fa fa-check"></i><b>3.1.2</b> Elementos de un documento Rmarkdown</a></li>
<li class="chapter" data-level="3.1.3" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html#tablas-con-rmarkdown"><i class="fa fa-check"></i><b>3.1.3</b> Tablas con Rmarkdown</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="rmarkdown-y-shiny.html"><a href="rmarkdown-y-shiny.html#shiny"><i class="fa fa-check"></i><b>3.2</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i><b>4</b> Referencias</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Gráficos con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="graficos-basicos-en-el-analisis-de-datos" class="section level1">
<h1><span class="header-section-number">1</span> Gráficos básicos en el análisis de datos</h1>
<p>Esta sección es una breve introducción a los gráficos más comunes para analizar conjuntos de datos. Para ello, utilizaremos el paquete <code>ggplot2</code> (“gg” para “Grammar of Graphics”).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#install.packages(&quot;ggplot2&quot;)</span>
<span class="kw">library</span>(ggplot2) <span class="co">#carga la librería ggplot2</span></code></pre>
<p>Empezaremos con la función básica <code>qplot</code>(“quick plot”) de este paquete. Una descripción abreviada de esta función es</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(x, <span class="dt">y=</span><span class="ot">NULL</span>, data, <span class="dt">geom=</span><span class="st">&quot;auto&quot;</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>), <span class="dt">ylim =</span><span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>))</code></pre>
<div class="nota">
<ul>
<li>
<code>x</code> : valores en el eje de abscisas.
</li>
<li>
<code>y</code> : valores en el de ordenadas (opcional).
</li>
<li>
<code>data</code> : data.frame de donde salen los datos (opcional).
</li>
<li>
<code>geom</code> : elementos gráficos o geometrías (“point”,line“,”bar“,…). Por defecto, “point” si <code>y</code> viene especificado, e “histogram” si sólo se especifica <code>x</code>.
</li>
<li>
<code>xlim</code>, <code>ylim</code>: limites en los ejes de <code>x</code> e <code>y</code>.
</li>
</ul>
<p>
Otros argumentos relacionados con los ejes y el titulo del gráfico son: <code>main</code>: titulo del gráfico; <code>xlab</code>, <code>ylab</code>: etiquetas los los ejes; <code>log</code>: ejes en escala log. Los valores permitidos son “x”, “y” o bien “xy”.
</p>
</div>
<div id="distribucion-de-una-variable" class="section level2">
<h2><span class="header-section-number">1.1</span> Distribución de una variable</h2>
<p>Para intentar ver algo en un conjunto de datos, lo primero que se puede hacer es averiguar como se distribuyen sus valores. En R, hay funciones básicas (summary, stem, table, …) que permiten tener una idea de esta distribución.</p>
<p>El tipo de representación gráfica de la distribución cambia según la naturaleza de la variable en estudio. Una variable cuantitativa toma valores numéricos. Para una variable cuantitativa, se suele recurrir a un <strong>histograma</strong> o bien a un <strong>diagrama de caja</strong> para describir su distribución. Mientras que para variables cualitativas (o categóricas), se utilizará un <em>diagrama de barras</em>.</p>
<div id="histograma" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Histograma</h3>
<p>Para ilustrar la descripción gráfica de la distribución de una variable numérica, se utiliza la base de datos <code>msleep</code> que contiene información sobre el tiempo de sueño (en horas) de mamíferos:</p>
<pre class="sourceCode r"><code class="sourceCode r">msleep <span class="co"># ?msleep para más detalles</span></code></pre>
<pre><code>## # A tibble: 83 x 11
##    name  genus vore  order conservation sleep_total sleep_rem sleep_cycle
##    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
##  1 Chee~ Acin~ carni Carn~ lc                  12.1      NA        NA    
##  2 Owl ~ Aotus omni  Prim~ &lt;NA&gt;                17         1.8      NA    
##  3 Moun~ Aplo~ herbi Rode~ nt                  14.4       2.4      NA    
##  4 Grea~ Blar~ omni  Sori~ lc                  14.9       2.3       0.133
##  5 Cow   Bos   herbi Arti~ domesticated         4         0.7       0.667
##  6 Thre~ Brad~ herbi Pilo~ &lt;NA&gt;                14.4       2.2       0.767
##  7 Nort~ Call~ carni Carn~ vu                   8.7       1.4       0.383
##  8 Vesp~ Calo~ &lt;NA&gt;  Rode~ &lt;NA&gt;                 7        NA        NA    
##  9 Dog   Canis carni Carn~ domesticated        10.1       2.9       0.333
## 10 Roe ~ Capr~ herbi Arti~ lc                   3        NA        NA    
## # ... with 73 more rows, and 3 more variables: awake &lt;dbl&gt;, brainwt &lt;dbl&gt;,
## #   bodywt &lt;dbl&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#summary(msleep$sleep_total) #tiempo total de sueño (en horas)</span>
<span class="kw">stem</span>(msleep<span class="op">$</span>sleep_total)</code></pre>
<pre><code>## 
##   The decimal point is at the |
## 
##    0 | 9
##    2 | 79013589
##    4 | 0423346
##    6 | 23307
##    8 | 03446779114456788
##   10 | 01113346900135
##   12 | 15555880578
##   14 | 234456996889
##   16 | 604
##   18 | 01479</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(sleep_total,<span class="dt">data=</span>msleep) <span class="co">#histograma </span></code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>La altura de cada barra en el histograma es proporcional a la frecuencia de datos que caen en el intervalo correspondiente. Por defecto, en la función <code>qplot</code>el número de barras es igual a <code>bins=30</code>. Este valor es muy arbitrario. Otra alternativa consiste en elegir un número <span class="math inline">\(k\)</span> de barras en función del tamaña muestral <span class="math inline">\(n\)</span>, como por ejemplo, el criterio de Sturges (<span class="math inline">\(k=1+\log_2(n)\)</span>) o el criterio de Rule (<span class="math inline">\(k=2n^{1/3}\)</span>). Abajo, un histograma con un número de barras que sigue este ultimo criterio:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(sleep_total,<span class="dt">data=</span>msleep,<span class="dt">bins=</span><span class="dv">8</span>,<span class="dt">color=</span><span class="kw">I</span>(<span class="st">&quot;grey70&quot;</span>),<span class="dt">fill=</span><span class="kw">I</span>(<span class="st">&quot;lightblue&quot;</span>))</code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<div class="nota">
<p>
El argumento <code>fill</code>controla el color de relleno de las barras y el argumento <code>color</code> el color del borde. Para especificar un color concreto se utiliza la función I(). Si el color varía con otra variable <strong>z</strong>, se especifica esta dependencia escribiendo fill=<strong>z</strong>.
</p>
</div>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(sleep_total,<span class="dt">data=</span>msleep,<span class="dt">bins=</span><span class="dv">12</span>,<span class="dt">fill=</span>vore) <span class="co">#distribución del tiempo de sueño según dieta del mamifero. Representación poco adecuada en general.</span></code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="diagrama-de-caja-boxplot" class="section level3">
<h3><span class="header-section-number">1.1.2</span> Diagrama de caja (boxplot)</h3>
<p>Otra representación similar es el diagrama de caja. Este diagrama describe la distribución de una variable numérica mediante una caja y unos segmentos que acotan las regiones donde la variable tiene el grueso de sus valores. Esta representación es menos fina que la del histograma pero es más robusta (menos sensible a valores extremos).</p>
<p align="center">
<img src="imagenes/boxplot.png" width="400" />
</p>
<p>Esta representación es especialmente adecuada cuando se quiere describir como varía la distribución de una variable numérica en función de una variable categórica. Así, la distribución del tiempo de sueño según la dieta del mamífero se puede representar de la siguiente manera:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(vore,sleep_total,<span class="dt">data=</span>msleep,<span class="dt">geom=</span><span class="st">&quot;boxplot&quot;</span>,<span class="dt">xlab=</span><span class="st">&quot;Dieta&quot;</span>)</code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="ej">
<p>
Cargar la base de datos de la encuesta nacional americana <code>nhs</code> y representar la distribución del índice de masa corporal (imc) según el sexo o la raza.
</p>
</div>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">&quot;data/nhs.RDA&quot;</span>)
<span class="co">#View(nhs)</span></code></pre>
</div>
<div id="diagrama-de-barras" class="section level3">
<h3><span class="header-section-number">1.1.3</span> Diagrama de barras</h3>
<p>Los diagramas de barras permiten representar la distribución de una variable categórica. En esta representación, cada categoría viene representada por una barra cuya altura es proporcional a su frecuencia en la muestra.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(MASS)
<span class="kw">qplot</span>(T.categ,<span class="dt">data=</span>Aids2,<span class="dt">fill=</span><span class="kw">I</span>(<span class="st">&quot;lightblue&quot;</span>)) <span class="co">#Distribución de las categorias de transmisión en unaa muestra de casos de SIDA (Australia, 1998)</span></code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(T.categ,<span class="dt">data=</span>Aids2,<span class="dt">fill=</span>status,<span class="dt">color=</span><span class="kw">I</span>(<span class="st">&quot;gray60&quot;</span>)) <span class="co">#Distribución del estado vital del caso según la categoria de transmisión del SIDA</span></code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-13-2.png" width="672" /></p>
<p>Utilizando el argumento <code>fill</code> se puede ver como varia esta distribución de acuerdo a otra variable (aquí la categoría de transmisión). El gráfico obtenido resulta poco claro y veremos más adelante como mejorarlo.</p>
<div class="ej">
<p>
Representar la distribución de los hábitos con el tabaco según el sexo, utilizando la muestra de la encuesta nacional americana.
</p>
</div>
</div>
</div>
<div id="relacion-entre-dos-variables" class="section level2">
<h2><span class="header-section-number">1.2</span> Relación entre dos variables</h2>
<div id="diagrama-de-dispersion" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Diagrama de dispersión</h3>
<p>Para describir la relación entre dos variables cuantitativas se suele utilizar gráficos de dispersión. Estos gráficos describen esta relación mediante una nube de puntos en un plano cartesiano. Cada punto de la nube corresponde a una fila de la base de datos y cada una de las variables corresponde a un eje.
En el gráfico siguiente se describe la relación entre las horas de sueño y el peso del animal:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(bodywt,sleep_total,<span class="dt">data=</span>msleep,<span class="dt">xlab=</span><span class="st">&quot;peso (en kg, escala log)&quot;</span>,<span class="dt">log=</span><span class="st">&quot;x&quot;</span>)</code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Ajustando una curva suave (“smooth”) a la nube de puntos, se puede apreciar mejor la tendencia en esta relación:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(bodywt,sleep_total,<span class="dt">data=</span>msleep,<span class="dt">log=</span><span class="st">&quot;x&quot;</span>,<span class="dt">geom=</span><span class="st">&quot;smooth&quot;</span>)</code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#qplot(bodywt,sleep_total,data=msleep,log=&quot;x&quot;,geom=&quot;smooth&quot;, method=&quot;lm&quot;) ## para ajutar una recta; &quot;lm&quot;: linear model</span></code></pre>
<p>Para evitar los problemas de solapamiento de puntos en la representación se puede poner algo de ruido en los datos ( <code>geom="jitter"</code> ), jugar con el tamaño de los puntos (<code>size</code>) o utilizar el parámetro de transparencia (<code>alpha</code>):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(edad, imc,<span class="dt">data=</span>nhs,<span class="dt">alpha=</span><span class="kw">I</span>(.<span class="dv">1</span>),<span class="dt">size=</span><span class="kw">I</span>(<span class="dv">1</span>))</code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#qplot(edad, imc,data=nhs, alpha=I(.1),size=I(1), geom=&quot;jitter&quot;) #Mejor resultado añadiendo algo de ruido</span></code></pre>
<div class="ej">
<p>
Utilizando la encuesta nacional americana, describir la relación entre la edad y el IMC. En un mismo gráfico, describir como esta relación cambia con el sexo.
</p>
</div>
</div>
<div id="dotchart" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Dotchart</h3>
<p>Si una de las variables es categórica y tiene muchas categorías, el gráfico de dispersión puede ser también apropiado:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(sleep_total,order,<span class="dt">data=</span>msleep,<span class="dt">col=</span>vore) </code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>Pero, es recomendable para mayor claridad ordenar la variable categórica de acuerdo a la otra variable:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(sleep_total,<span class="kw">reorder</span>(order,sleep_total),<span class="dt">data=</span>msleep,<span class="dt">col=</span>vore,<span class="dt">ylab=</span><span class="st">&quot;horas de sueño&quot;</span>)</code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<div class="ej">
<p>
Describir con un gráfico similar al anterior, los datos de la base de datos <code>islands</code> sobre superficies de islas. Puede ser oportuno recurrir a una escala log.
</p>
</div>
</div>
<div id="relacion-con-una-variable-temporal" class="section level3">
<h3><span class="header-section-number">1.2.3</span> Relación con una variable temporal</h3>
<p>Si una de las variables es el tiempo, a menudo es conveniente recurrir a lineas (<code>geom="line"</code>) en vez de puntos para representar la evolución de la otra variable.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(gapminder) <span class="co">#base de datos sobre esperanza de vida según caracteristicas socio-demograficas del pais</span>
datos=<span class="kw">subset</span>(gapminder,country <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Spain&quot;</span>,<span class="st">&quot;Greece&quot;</span>,<span class="st">&quot;Poland&quot;</span>)) <span class="co">#sólo se consideran España, Grecia y Polonia</span>
<span class="kw">qplot</span>(year,lifeExp,<span class="dt">data=</span>datos,<span class="dt">geom=</span><span class="st">&quot;line&quot;</span>,<span class="dt">color=</span>country)</code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>Sin embargo para representar la tendencia se utilizará la opción <code>geom="smooth"</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(year,lifeExp,<span class="dt">data=</span>gapminder,<span class="dt">geom=</span><span class="st">&quot;smooth&quot;</span>,<span class="dt">color=</span>continent,<span class="dt">se=</span><span class="ot">FALSE</span>) <span class="co">#se=FALSE para quitar intervalos de confianza</span></code></pre>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<div class="ej">
<p>
Describir con gráficos similares a los anteriores, los datos de la base de datos <code>cancer</code> sobre la evolución de las tasas de mortalidad por cáncer en España en el periodo 1975-2012. Empezar por ejemplo, representando la evolución de la mortalidad por cáncer de pulmón según el sexo.
</p>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graficos-avanzados.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["graficosConR.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
