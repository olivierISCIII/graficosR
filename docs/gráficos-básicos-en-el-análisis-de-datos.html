<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Gráficos básicos en el análisis de datos | Gráficos con R</title>
  <meta name="description" content="1 Gráficos básicos en el análisis de datos | Gráficos con R" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Gráficos básicos en el análisis de datos | Gráficos con R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Gráficos básicos en el análisis de datos | Gráficos con R" />
  
  
  

<meta name="author" content="Olivier Nuñez" />


<meta name="date" content="2021-10-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="gráficos-avanzados.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preámbulo</a></li>
<li class="chapter" data-level="1" data-path="gráficos-básicos-en-el-análisis-de-datos.html"><a href="gráficos-básicos-en-el-análisis-de-datos.html"><i class="fa fa-check"></i><b>1</b> Gráficos básicos en el análisis de datos</a>
<ul>
<li class="chapter" data-level="1.1" data-path="gráficos-básicos-en-el-análisis-de-datos.html"><a href="gráficos-básicos-en-el-análisis-de-datos.html#distribución-de-una-variable"><i class="fa fa-check"></i><b>1.1</b> Distribución de una variable</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="gráficos-básicos-en-el-análisis-de-datos.html"><a href="gráficos-básicos-en-el-análisis-de-datos.html#histograma"><i class="fa fa-check"></i><b>1.1.1</b> Histograma</a></li>
<li class="chapter" data-level="1.1.2" data-path="gráficos-básicos-en-el-análisis-de-datos.html"><a href="gráficos-básicos-en-el-análisis-de-datos.html#diagrama-de-caja-boxplot"><i class="fa fa-check"></i><b>1.1.2</b> Diagrama de caja (boxplot)</a></li>
<li class="chapter" data-level="1.1.3" data-path="gráficos-básicos-en-el-análisis-de-datos.html"><a href="gráficos-básicos-en-el-análisis-de-datos.html#diagrama-de-barras"><i class="fa fa-check"></i><b>1.1.3</b> Diagrama de barras</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="gráficos-básicos-en-el-análisis-de-datos.html"><a href="gráficos-básicos-en-el-análisis-de-datos.html#relación-entre-dos-variables"><i class="fa fa-check"></i><b>1.2</b> Relación entre dos variables</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="gráficos-básicos-en-el-análisis-de-datos.html"><a href="gráficos-básicos-en-el-análisis-de-datos.html#diagrama-de-dispersión"><i class="fa fa-check"></i><b>1.2.1</b> Diagrama de dispersión</a></li>
<li class="chapter" data-level="1.2.2" data-path="gráficos-básicos-en-el-análisis-de-datos.html"><a href="gráficos-básicos-en-el-análisis-de-datos.html#dotchart"><i class="fa fa-check"></i><b>1.2.2</b> Dotchart</a></li>
<li class="chapter" data-level="1.2.3" data-path="gráficos-básicos-en-el-análisis-de-datos.html"><a href="gráficos-básicos-en-el-análisis-de-datos.html#relación-con-una-variable-temporal"><i class="fa fa-check"></i><b>1.2.3</b> Relación con una variable temporal</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html"><i class="fa fa-check"></i><b>2</b> Gráficos avanzados</a>
<ul>
<li class="chapter" data-level="2.1" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#elementos-de-un-gráfico"><i class="fa fa-check"></i><b>2.1</b> Elementos de un gráfico</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#datos"><i class="fa fa-check"></i><b>2.1.1</b> Datos</a></li>
<li class="chapter" data-level="2.1.2" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#estéticas-aes"><i class="fa fa-check"></i><b>2.1.2</b> Estéticas (<code>aes</code>)</a></li>
<li class="chapter" data-level="2.1.3" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#capas-geoms"><i class="fa fa-check"></i><b>2.1.3</b> Capas (<code>geoms</code>)</a></li>
<li class="chapter" data-level="2.1.4" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#facetas"><i class="fa fa-check"></i><b>2.1.4</b> Facetas</a></li>
<li class="chapter" data-level="2.1.5" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#toque-final"><i class="fa fa-check"></i><b>2.1.5</b> Toque final</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#mapas"><i class="fa fa-check"></i><b>2.2</b> Mapas</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#más-ejemplos-de-mapas-con-puntos"><i class="fa fa-check"></i><b>2.2.1</b> Más ejemplos de mapas con puntos</a></li>
<li class="chapter" data-level="2.2.2" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#más-allá-de-los-puntos-densidades-y-poligonos"><i class="fa fa-check"></i><b>2.2.2</b> Más allá de los puntos: densidades y poligonos</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#árboles-filogenéticos"><i class="fa fa-check"></i><b>2.3</b> Árboles filogenéticos</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#importación-de-un-árbol"><i class="fa fa-check"></i><b>2.3.1</b> Importación de un árbol</a></li>
<li class="chapter" data-level="2.3.2" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#representación-básica"><i class="fa fa-check"></i><b>2.3.2</b> Representación básica</a></li>
<li class="chapter" data-level="2.3.3" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#agrupación-de-nodos"><i class="fa fa-check"></i><b>2.3.3</b> Agrupación de nodos</a></li>
<li class="chapter" data-level="2.3.4" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#añadir-heatmap"><i class="fa fa-check"></i><b>2.3.4</b> Añadir Heatmap</a></li>
<li class="chapter" data-level="2.3.5" data-path="gráficos-avanzados.html"><a href="gráficos-avanzados.html#visualización-de-multiple-arboles"><i class="fa fa-check"></i><b>2.3.5</b> Visualización de multiple arboles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>3</b> Rmarkdown</a>
<ul>
<li class="chapter" data-level="3.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-en-15-mn"><i class="fa fa-check"></i><b>3.1</b> Rmarkdown en 15 mn</a></li>
<li class="chapter" data-level="3.2" data-path="rmarkdown.html"><a href="rmarkdown.html#elementos-de-un-documento-rmarkdown"><i class="fa fa-check"></i><b>3.2</b> Elementos de un documento Rmarkdown</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="rmarkdown.html"><a href="rmarkdown.html#encabezado-préambulo"><i class="fa fa-check"></i><b>3.2.1</b> Encabezado (préambulo)</a></li>
<li class="chapter" data-level="3.2.2" data-path="rmarkdown.html"><a href="rmarkdown.html#texto-del-documento"><i class="fa fa-check"></i><b>3.2.2</b> Texto del documento</a></li>
<li class="chapter" data-level="3.2.3" data-path="rmarkdown.html"><a href="rmarkdown.html#bloques-de-codigo"><i class="fa fa-check"></i><b>3.2.3</b> Bloques de codigo</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="rmarkdown.html"><a href="rmarkdown.html#tablas-con-rmarkdown"><i class="fa fa-check"></i><b>3.3</b> Tablas con Rmarkdown</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="rmarkdown.html"><a href="rmarkdown.html#tablas-cruzadas"><i class="fa fa-check"></i><b>3.3.1</b> Tablas cruzadas</a></li>
<li class="chapter" data-level="3.3.2" data-path="rmarkdown.html"><a href="rmarkdown.html#base-de-datos"><i class="fa fa-check"></i><b>3.3.2</b> Base de datos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i><b>4</b> Referencias</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Gráficos con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="gráficos-básicos-en-el-análisis-de-datos" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Gráficos básicos en el análisis de datos</h1>
<p>Esta sección es una breve introducción a los gráficos más comunes para analizar conjuntos de datos. Para ello, utilizaremos el paquete <code>ggplot2</code> (“gg” para “Grammar of Graphics”).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;ggplot2&quot;)</span></span>
<span id="cb2-2"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co">#carga la librería ggplot2</span></span></code></pre></div>
<p>Empezaremos con la función básica <code>qplot</code>(“quick plot”) de este paquete. Una descripción abreviada de esta función es</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(x, <span class="at">y=</span><span class="cn">NULL</span>, data, <span class="at">geom=</span><span class="st">&quot;auto&quot;</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>), <span class="at">ylim =</span><span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>))</span></code></pre></div>
<div class="nota">
<ul>
<li>
<code>x</code> : valores en el eje de abscisas.
</li>
<li>
<code>y</code> : valores en el de ordenadas (opcional).
</li>
<li>
<code>data</code> : data.frame de donde salen los datos (opcional).
</li>
<li>
<code>geom</code> : elementos gráficos o geometrías (“point”,line”,“bar”,…). Por defecto, “point” si <code>y</code> viene especificado, e “histogram” si sólo se especifica <code>x</code>.
</li>
<li>
<code>xlim</code>, <code>ylim</code>: limites en los ejes de <code>x</code> e <code>y</code>.
</li>
</ul>
<p>
Otros argumentos relacionados con los ejes y el titulo del gráfico son: <code>main</code>: titulo del gráfico; <code>xlab</code>, <code>ylab</code>: etiquetas los los ejes; <code>log</code>: ejes en escala log. Los valores permitidos son “x”, “y” o bien “xy”.
</p>
</div>
<div id="distribución-de-una-variable" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Distribución de una variable</h2>
<p>Para intentar ver algo en un conjunto de datos, lo primero que se puede hacer es averiguar como se distribuyen sus valores. En R, hay funciones básicas (summary, stem, table, …) que permiten tener una idea de esta distribución.</p>
<p>El tipo de representación gráfica de la distribución cambia según la naturaleza de la variable en estudio. Una variable cuantitativa toma valores numéricos. Para una variable cuantitativa, se suele recurrir a un <strong>histograma</strong> o bien a un <strong>diagrama de caja</strong> para describir su distribución. Mientras que para variables cualitativas (o categóricas), se utilizará un <em>diagrama de barras</em>.</p>
<div id="histograma" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Histograma</h3>
<p>Para ilustrar la descripción gráfica de la distribución de una variable numérica, se utiliza la base de datos <code>msleep</code> que contiene información sobre el tiempo de sueño (en horas) de mamíferos:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb4-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="co"># ?msleep para más detalles</span></span></code></pre></div>
<pre><code>## # A tibble: 83 x 11
##    name                     genus      vore  order       conservation sleep_total sleep_rem sleep_cycle awake  brainwt  bodywt
##    &lt;chr&gt;                    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
##  1 Cheetah                  Acinonyx   carni Carnivora   lc                  12.1      NA        NA      11.9 NA        50    
##  2 Owl monkey               Aotus      omni  Primates    &lt;NA&gt;                17         1.8      NA       7    0.0155    0.48 
##  3 Mountain beaver          Aplodontia herbi Rodentia    nt                  14.4       2.4      NA       9.6 NA         1.35 
##  4 Greater short-tailed sh~ Blarina    omni  Soricomorp~ lc                  14.9       2.3       0.133   9.1  0.00029   0.019
##  5 Cow                      Bos        herbi Artiodacty~ domesticated         4         0.7       0.667  20    0.423   600    
##  6 Three-toed sloth         Bradypus   herbi Pilosa      &lt;NA&gt;                14.4       2.2       0.767   9.6 NA         3.85 
##  7 Northern fur seal        Callorhin~ carni Carnivora   vu                   8.7       1.4       0.383  15.3 NA        20.5  
##  8 Vesper mouse             Calomys    &lt;NA&gt;  Rodentia    &lt;NA&gt;                 7        NA        NA      17   NA         0.045
##  9 Dog                      Canis      carni Carnivora   domesticated        10.1       2.9       0.333  13.9  0.07     14    
## 10 Roe deer                 Capreolus  herbi Artiodacty~ lc                   3        NA        NA      21    0.0982   14.8  
## # ... with 73 more rows</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#summary(msleep$sleep_total) #tiempo total de sueño (en horas)</span></span>
<span id="cb6-2"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stem</span>(msleep<span class="sc">$</span>sleep_total)</span></code></pre></div>
<pre><code>## 
##   The decimal point is at the |
## 
##    0 | 9
##    2 | 79013589
##    4 | 0423346
##    6 | 23307
##    8 | 03446779114456788
##   10 | 01113346900135
##   12 | 15555880578
##   14 | 234456996889
##   16 | 604
##   18 | 01479</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(sleep_total,<span class="at">data=</span>msleep) <span class="co">#histograma </span></span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>La altura de cada barra en el histograma es proporcional a la frecuencia de datos que caen en el intervalo correspondiente. Por defecto, en la función <code>qplot</code>el número de barras es igual a <code>bins=30</code>. Este valor es muy arbitrario. Otra alternativa consiste en elegir un número <span class="math inline">\(k\)</span> de barras en función del tamaña muestral <span class="math inline">\(n\)</span>, como por ejemplo, el criterio de Sturges (<span class="math inline">\(k=1+\log_2(n)\)</span>) o el criterio de Rule (<span class="math inline">\(k=2n^{1/3}\)</span>). Abajo, un histograma con un número de barras que sigue este ultimo criterio:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(sleep_total,<span class="at">data=</span>msleep,<span class="at">bins=</span><span class="dv">8</span>,<span class="at">color=</span><span class="fu">I</span>(<span class="st">&quot;grey70&quot;</span>),<span class="at">fill=</span><span class="fu">I</span>(<span class="st">&quot;lightblue&quot;</span>))</span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<div class="nota">
<p>
El argumento <code>fill</code>controla el color de relleno de las barras y el argumento <code>color</code> el color del borde. Para especificar un color concreto se utiliza la función I(). Si el color varía con otra variable <strong>z</strong>, se especifica esta dependencia escribiendo fill=<strong>z</strong>.
</p>
</div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(sleep_total,<span class="at">data=</span>msleep,<span class="at">bins=</span><span class="dv">12</span>,<span class="at">fill=</span>vore) <span class="co">#distribución del tiempo de sueño según dieta del mamifero. Representación poco adecuada en general.</span></span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="diagrama-de-caja-boxplot" class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Diagrama de caja (boxplot)</h3>
<p>Otra representación similar es el diagrama de caja. Este diagrama describe la distribución de una variable numérica mediante una caja y unos segmentos que acotan las regiones donde la variable tiene el grueso de sus valores. Esta representación es menos fina que la del histograma pero es más robusta (menos sensible a valores extremos).</p>
<p align="center">
<img src="imagenes/boxplot.png" width="400" />
</p>
<p>Esta representación es especialmente adecuada cuando se quiere describir como varía la distribución de una variable numérica en función de una variable categórica. Así, la distribución del tiempo de sueño según la dieta del mamífero se puede representar de la siguiente manera:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(vore,sleep_total,<span class="at">data=</span>msleep,<span class="at">geom=</span><span class="st">&quot;boxplot&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Dieta&quot;</span>)</span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="ej">
<p>
Cargar la base de datos de la encuesta nacional americana <code>nhs</code> y representar la distribución del índice de masa corporal (imc) según el sexo y la raza.
</p>
</div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data/nhs.RDA&quot;</span>)</span>
<span id="cb12-2"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#View(nhs)</span></span></code></pre></div>
</div>
<div id="diagrama-de-barras" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Diagrama de barras</h3>
<p>Los diagramas de barras permiten representar la distribución de una variable categórica. En esta representación, cada categoría viene representada por una barra cuya altura es proporcional a su frecuencia en la muestra.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(raza,<span class="at">data=</span>nhs) <span class="co">#Distribución de las razas en la muestra de la encuesta americana </span></span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(raza,<span class="at">data=</span>nhs,<span class="at">fill=</span>sexo,<span class="at">color=</span><span class="fu">I</span>(<span class="st">&quot;black&quot;</span>)) <span class="co">#Distribución del sexo segun la raza ```</span></span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-13-2.png" width="672" /></p>
<p>Utilizando el argumento <code>fill</code> se puede ver como varia la distribución de una variable respecto a otra (aquí el sexo según la raza). El gráfico obtenido resulta poco claro y veremos más adelante como mejorarlo.</p>
<div class="ej">
<p>
Representar la distribución del “sobrepeso” (imc&gt;25) según la raza, utilizando la muestra de la encuesta nacional americana.
</p>
</div>
</div>
</div>
<div id="relación-entre-dos-variables" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Relación entre dos variables</h2>
<div id="diagrama-de-dispersión" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Diagrama de dispersión</h3>
<p>Para describir la relación entre dos variables cuantitativas se suele utilizar gráficos de dispersión. Estos gráficos describen esta relación mediante una nube de puntos en un plano cartesiano. Cada punto de la nube corresponde a una fila de la base de datos y cada una de las variables corresponde a un eje.
En el gráfico siguiente se describe la relación entre las horas de sueño y el peso del animal:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(bodywt,sleep_total,<span class="at">data=</span>msleep,<span class="at">xlab=</span><span class="st">&quot;peso (en kg, escala log)&quot;</span>,<span class="at">log=</span><span class="st">&quot;x&quot;</span>)</span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Ajustando una curva suave (“smooth”) a la nube de puntos, se puede apreciar mejor la tendencia en esta relación:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(bodywt,sleep_total,<span class="at">data=</span>msleep,<span class="at">log=</span><span class="st">&quot;x&quot;</span>,<span class="at">geom=</span><span class="st">&quot;smooth&quot;</span>)</span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#qplot(bodywt,sleep_total,data=msleep,log=&quot;x&quot;,geom=&quot;smooth&quot;, method=&quot;lm&quot;) ## para ajutar una recta; &quot;lm&quot;: linear model</span></span></code></pre></div>
<p>Para evitar los problemas de solapamiento de puntos en la representación se puede poner algo de ruido en los datos ( <code>geom="jitter"</code> ), jugar con el tamaño de los puntos (<code>size</code>) o utilizar el parámetro de transparencia (<code>alpha</code>):</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(edad, imc,<span class="at">data=</span>nhs,<span class="at">alpha=</span><span class="fu">I</span>(.<span class="dv">1</span>),<span class="at">size=</span><span class="fu">I</span>(<span class="dv">1</span>))</span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#qplot(edad, imc,data=nhs, alpha=I(.1),size=I(1), geom=&quot;jitter&quot;) #Mejor resultado añadiendo algo de ruido</span></span></code></pre></div>
<div class="ej">
<p>
Utilizando la encuesta nacional americana, describir la relación entre la edad y la presión arterial sistólica. En un mismo gráfico, describir como esta relación cambia con el sexo.
</p>
</div>
</div>
<div id="dotchart" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Dotchart</h3>
<p>Si una de las variables es categórica y tiene muchas categorías, el gráfico de dispersión puede ser también apropiado:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(sleep_total,order,<span class="at">data=</span>msleep,<span class="at">col=</span>vore) </span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>Pero, es recomendable para mayor claridad ordenar la variable categórica de acuerdo a la otra variable:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(sleep_total,<span class="fu">reorder</span>(order,sleep_total),<span class="at">data=</span>msleep,<span class="at">col=</span>vore,<span class="at">ylab=</span><span class="st">&quot;horas de sueño&quot;</span>)</span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<div class="ej">
<p>
Describir con un gráfico similar al anterior, los datos de la base de datos <code>islands</code> sobre superficies de islas. Puede ser oportuno recurrir a una escala log.
</p>
</div>
</div>
<div id="relación-con-una-variable-temporal" class="section level3" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Relación con una variable temporal</h3>
<p>Si una de las variables es el tiempo, a menudo es conveniente recurrir a lineas (<code>geom="line"</code>) en vez de puntos para representar la evolución de la otra variable.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(gapminder) <span class="co">#base de datos sobre esperanza de vida según caracteristicas socio-demograficas del pais</span></span>
<span id="cb22-2"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb22-2" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">=</span><span class="fu">subset</span>(gapminder,country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Spain&quot;</span>,<span class="st">&quot;Greece&quot;</span>,<span class="st">&quot;Poland&quot;</span>)) <span class="co">#sólo se consideran España, Grecia y Polonia</span></span>
<span id="cb22-3"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(year,lifeExp,<span class="at">data=</span>datos,<span class="at">geom=</span><span class="st">&quot;line&quot;</span>,<span class="at">color=</span>country)</span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>Sin embargo para representar la tendencia se utilizará la opción <code>geom="smooth"</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="gráficos-básicos-en-el-análisis-de-datos.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(year,lifeExp,<span class="at">data=</span>gapminder,<span class="at">geom=</span><span class="st">&quot;smooth&quot;</span>,<span class="at">color=</span>continent,<span class="at">se=</span><span class="cn">FALSE</span>) <span class="co">#se=FALSE para quitar intervalos de confianza</span></span></code></pre></div>
<p><img src="graficosConR_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<div class="ej">
<p>
Describir con gráficos similares a los anteriores, los datos de la base de datos <code>cancer</code> sobre la evolución de las tasas de mortalidad por cáncer en España en el periodo 1975-2012. Empezar por ejemplo, representando la evolución de la mortalidad por cáncer de pulmón según el sexo.
</p>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="gráficos-avanzados.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["graficosConR.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
